<ion-header>
  <ion-navbar>

    <div class="toolbar">
      <h3 *ngIf="sessionData.currentContact">
        Messages de
         {{ sessionData.currentContact.forename }} {{ sessionData.currentContact.name }}
         {{ sessionData.currentContact.address }}
       </h3>
       <button ion-button icon-start (click)="scrollToLastMail()" class="button right maroon 1-part">
         <ion-icon name="eye"></ion-icon>
         Voir le dernier message échangé le {{ sessionData.getDateOfLastMail()|date:"dd/MM/yyyy 'à' HH:mm" }}
       </button>
   </div>
  </ion-navbar>
</ion-header>

<ion-content #content class="message-container">
    <div *ngFor="let message of sessionData.listAllCurrentMails()"
      class="message"
      [ngClass]="message.toMe ? 'message-received': 'message-sent'">
      <div class="message-header">
        {{ message.toMe ? 'Reçu': 'Envoyé'}} le {{ message.date|date:"dd/MM/yyyy 'à' HH:mm" }} - {{ message.subject }}
      </div>

      <div class="message-content">
        {{ message.body }}
      </div>
    </div>

</ion-content>

<ion-footer>
  <h4>Écrire ou continuer un message </h4>
  <!-- TODO le clic sur le bouton fait obligatoirement descendre tout en bas -->

  <ion-textarea
    placeholder="Appuyer ici pour écrire un nouveau message"
    [(ngModel)]="sessionData.currentMail.body">
  </ion-textarea>

  <!-- TODO en priorité la gestion des deux appareils photos back et front-->
  <div class="buttons-footer">
    <button ion-button icon-start (click)="openCamera()" class="button left green">
      <ion-icon name="camera"></ion-icon>
      Ajouter une photo
    </button>

    <button ion-button icon-start (click)="sendMail()" class="button right blue">
      <ion-icon name="send"></ion-icon>
      Envoyer le courier
    </button>
  </div>

</ion-footer>
